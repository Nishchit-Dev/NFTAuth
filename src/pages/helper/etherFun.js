import { ethers } from "ethers";
import abi from '../DeployContract/abi.json'

var byteCode = "6080604052604051806020016040528060008152506009908162000024919062000451565b506000600a556000600b556001600c60006101000a81548160ff0219169083151502179055503480156200005757600080fd5b5060405162002af438038062002af483398181016040528101906200007d9190620006cd565b84846200009f620000936200010660201b60201c565b6200010e60201b60201c565b8160039081620000b0919062000451565b508060049081620000c2919062000451565b50620000d3620001d260201b60201c565b600181905550505082600b819055508160099081620000f3919062000451565b5080600a819055505050505050620007b2565b600033905090565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050816000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600090565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806200025957607f821691505b6020821081036200026f576200026e62000211565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620002d97fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826200029a565b620002e586836200029a565b95508019841693508086168417925050509392505050565b6000819050919050565b6000819050919050565b6000620003326200032c6200032684620002fd565b62000307565b620002fd565b9050919050565b6000819050919050565b6200034e8362000311565b620003666200035d8262000339565b848454620002a7565b825550505050565b600090565b6200037d6200036e565b6200038a81848462000343565b505050565b5b81811015620003b257620003a660008262000373565b60018101905062000390565b5050565b601f8211156200040157620003cb8162000275565b620003d6846200028a565b81016020851015620003e6578190505b620003fe620003f5856200028a565b8301826200038f565b50505b505050565b600082821c905092915050565b6000620004266000198460080262000406565b1980831691505092915050565b600062000441838362000413565b9150826002028217905092915050565b6200045c82620001d7565b67ffffffffffffffff811115620004785762000477620001e2565b5b62000484825462000240565b62000491828285620003b6565b600060209050601f831160018114620004c95760008415620004b4578287015190505b620004c0858262000433565b86555062000530565b601f198416620004d98662000275565b60005b828110156200050357848901518255600182019150602085019450602081019050620004dc565b868310156200052357848901516200051f601f89168262000413565b8355505b6001600288020188555050505b505050505050565b6000604051905090565b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b620005728262000556565b810181811067ffffffffffffffff82111715620005945762000593620001e2565b5b80604052505050565b6000620005a962000538565b9050620005b7828262000567565b919050565b600067ffffffffffffffff821115620005da57620005d9620001e2565b5b620005e58262000556565b9050602081019050919050565b60005b8381101562000612578082015181840152602081019050620005f5565b60008484015250505050565b6000620006356200062f84620005bc565b6200059d565b90508281526020810184848401111562000654576200065362000551565b5b62000661848285620005f2565b509392505050565b600082601f8301126200068157620006806200054c565b5b8151620006938482602086016200061e565b91505092915050565b620006a781620002fd565b8114620006b357600080fd5b50565b600081519050620006c7816200069c565b92915050565b600080600080600060a08688031215620006ec57620006eb62000542565b5b600086015167ffffffffffffffff8111156200070d576200070c62000547565b5b6200071b8882890162000669565b955050602086015167ffffffffffffffff8111156200073f576200073e62000547565b5b6200074d8882890162000669565b94505060406200076088828901620006b6565b935050606086015167ffffffffffffffff81111562000784576200078362000547565b5b620007928882890162000669565b9250506080620007a588828901620006b6565b9150509295509295909350565b61233280620007c26000396000f3fe60806040526004361061014a5760003560e01c8063715018a6116100b6578063a22cb4651161006f578063a22cb46514610418578063b88d4fde14610441578063c87b56dd1461045d578063d12397301461049a578063e985e9c5146104c5578063f2fde38b146105025761014a565b8063715018a61461034d5780637d55094d146103645780638da5cb5b1461037b57806395d89b41146103a6578063a035b1fe146103d1578063a0712d68146103fc5761014a565b806323b872dd1161010857806323b872dd146102665780633ccfd60b1461028257806342842e0e1461028c5780636352211e146102a85780636c0360eb146102e557806370a08231146103105761014a565b80624563791461014f57806301ffc9a71461017a57806306fdde03146101b7578063081812fc146101e2578063095ea7b31461021f57806318160ddd1461023b575b600080fd5b34801561015b57600080fd5b5061016461052b565b6040516101719190611914565b60405180910390f35b34801561018657600080fd5b506101a1600480360381019061019c919061199b565b610531565b6040516101ae91906119e3565b60405180910390f35b3480156101c357600080fd5b506101cc6105c3565b6040516101d99190611a8e565b60405180910390f35b3480156101ee57600080fd5b5061020960048036038101906102049190611adc565b610655565b6040516102169190611b4a565b60405180910390f35b61023960048036038101906102349190611b91565b6106b3565b005b34801561024757600080fd5b506102506106c3565b60405161025d9190611914565b60405180910390f35b610280600480360381019061027b9190611bd1565b6106da565b005b61028a61099b565b005b6102a660048036038101906102a19190611bd1565b6109f3565b005b3480156102b457600080fd5b506102cf60048036038101906102ca9190611adc565b610a13565b6040516102dc9190611b4a565b60405180910390f35b3480156102f157600080fd5b506102fa610a25565b6040516103079190611a8e565b60405180910390f35b34801561031c57600080fd5b5061033760048036038101906103329190611c24565b610ab3565b6040516103449190611914565b60405180910390f35b34801561035957600080fd5b50610362610b4a565b005b34801561037057600080fd5b50610379610b5e565b005b34801561038757600080fd5b50610390610b92565b60405161039d9190611b4a565b60405180910390f35b3480156103b257600080fd5b506103bb610bbb565b6040516103c89190611a8e565b60405180910390f35b3480156103dd57600080fd5b506103e6610c4d565b6040516103f39190611914565b60405180910390f35b61041660048036038101906104119190611adc565b610c53565b005b34801561042457600080fd5b5061043f600480360381019061043a9190611c7d565b610d06565b005b61045b60048036038101906104569190611df2565b610e11565b005b34801561046957600080fd5b50610484600480360381019061047f9190611adc565b610e63565b6040516104919190611a8e565b60405180910390f35b3480156104a657600080fd5b506104af610ee0565b6040516104bc91906119e3565b60405180910390f35b3480156104d157600080fd5b506104ec60048036038101906104e79190611e75565b610ef3565b6040516104f991906119e3565b60405180910390f35b34801561050e57600080fd5b5061052960048036038101906105249190611c24565b610f87565b005b600a5481565b60006301ffc9a760e01b827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061058c57506380ac58cd60e01b827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b806105bc5750635b5e139f60e01b827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b9050919050565b6060600380546105d290611ee4565b80601f01602080910402602001604051908101604052809291908181526020018280546105fe90611ee4565b801561064b5780601f106106205761010080835404028352916020019161064b565b820191906000526020600020905b81548152906001019060200180831161062e57829003601f168201915b5050505050905090565b60006106608261100a565b6106755761067463cf4700e460e01b611083565b5b6007600083815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b6106bf8282600161108d565b5050565b60006106cd6111bc565b6002546001540303905090565b60006106e5826111c1565b905073ffffffffffffffffffffffffffffffffffffffff8473ffffffffffffffffffffffffffffffffffffffff161693508373ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161461075a5761075963a114810060e01b611083565b5b600080610766846112ad565b9150915061077c81876107776112d4565b6112dc565b6107a7576107918661078c6112d4565b610ef3565b6107a6576107a56359c896be60e01b611083565b5b5b6107b48686866001611320565b80156107bf57600082555b600660008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600081546001900391905081905550600660008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600081546001019190508190555061088d85610869888887611326565b7c02000000000000000000000000000000000000000000000000000000001761134e565b600560008681526020019081526020016000208190555060007c02000000000000000000000000000000000000000000000000000000008416036109135760006001850190506000600560008381526020019081526020016000205403610911576001548114610910578360056000838152602001908152602001600020819055505b5b505b600073ffffffffffffffffffffffffffffffffffffffff8673ffffffffffffffffffffffffffffffffffffffff161690508481887fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef600080a4600081036109855761098463ea553b3460e01b611083565b5b6109928787876001611379565b50505050505050565b6109a361137f565b6109ab610b92565b73ffffffffffffffffffffffffffffffffffffffff166108fc479081150290604051600060405180830381858888f193505050501580156109f0573d6000803e3d6000fd5b50565b610a0e83838360405180602001604052806000815250610e11565b505050565b6000610a1e826111c1565b9050919050565b60098054610a3290611ee4565b80601f0160208091040260200160405190810160405280929190818152602001828054610a5e90611ee4565b8015610aab5780601f10610a8057610100808354040283529160200191610aab565b820191906000526020600020905b815481529060010190602001808311610a8e57829003601f168201915b505050505081565b60008073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610af957610af8638f4eb60460e01b611083565b5b67ffffffffffffffff600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054169050919050565b610b5261137f565b610b5c60006113fd565b565b610b6661137f565b600c60009054906101000a900460ff1615600c60006101000a81548160ff021916908315150217905550565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b606060048054610bca90611ee4565b80601f0160208091040260200160405190810160405280929190818152602001828054610bf690611ee4565b8015610c435780601f10610c1857610100808354040283529160200191610c43565b820191906000526020600020905b815481529060010190602001808311610c2657829003601f168201915b5050505050905090565b600b5481565b600a5481610c5f6106c3565b610c699190611f44565b10610ca9576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ca090611fc4565b60405180910390fd5b600b5481610cb79190611fe4565b341015610cf9576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cf090612072565b60405180910390fd5b610d0333826114c1565b50565b8060086000610d136112d4565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff16610dc06112d4565b73ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c3183604051610e0591906119e3565b60405180910390a35050565b610e1c8484846106da565b60008373ffffffffffffffffffffffffffffffffffffffff163b14610e5d57610e47848484846114df565b610e5c57610e5b63d1a57ed660e01b611083565b5b5b50505050565b6060610e6e8261100a565b610e8357610e8263a14c4b5060e01b611083565b5b6000610e8d61160e565b90506000815103610ead5760405180602001604052806000815250610ed8565b80610eb7846116a0565b604051602001610ec89291906120ce565b6040516020818303038152906040525b915050919050565b600c60009054906101000a900460ff1681565b6000600860008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b610f8f61137f565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1603610ffe576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ff590612164565b60405180910390fd5b611007816113fd565b50565b6000816110156111bc565b1161107e5760015482101561107d5760005b6000600560008581526020019081526020016000205491508103611056578261104f90612184565b9250611027565b60007c01000000000000000000000000000000000000000000000000000000008216149150505b5b919050565b8060005260046000fd5b600061109883610a13565b90508180156110da57508073ffffffffffffffffffffffffffffffffffffffff166110c16112d4565b73ffffffffffffffffffffffffffffffffffffffff1614155b15611106576110f0816110eb6112d4565b610ef3565b6111055761110463cfb3b94260e01b611083565b5b5b836007600085815260200190815260200160002060000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550828473ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a450505050565b600090565b6000816111cc6111bc565b1161129757600560008381526020019081526020016000205490506000810361126e5760015482106112095761120863df2d9b4260e01b611083565b5b5b600560008360019003935083815260200190815260200160002054905060008103156112695760007c0100000000000000000000000000000000000000000000000000000000821603156112a85761126863df2d9b4260e01b611083565b5b61120a565b60007c0100000000000000000000000000000000000000000000000000000000821603156112a8575b6112a763df2d9b4260e01b611083565b5b919050565b60008060006007600085815260200190815260200160002090508092508254915050915091565b600033905090565b600073ffffffffffffffffffffffffffffffffffffffff8316925073ffffffffffffffffffffffffffffffffffffffff821691508382148383141790509392505050565b50505050565b60008060e883901c905060e861133d8686846116f0565b62ffffff16901b9150509392505050565b600073ffffffffffffffffffffffffffffffffffffffff83169250814260a01b178317905092915050565b50505050565b6113876116f9565b73ffffffffffffffffffffffffffffffffffffffff166113a5610b92565b73ffffffffffffffffffffffffffffffffffffffff16146113fb576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016113f2906121f9565b60405180910390fd5b565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050816000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b6114db828260405180602001604052806000815250611701565b5050565b60008373ffffffffffffffffffffffffffffffffffffffff1663150b7a026115056112d4565b8786866040518563ffffffff1660e01b8152600401611527949392919061226e565b6020604051808303816000875af192505050801561156357506040513d601f19601f8201168201806040525081019061156091906122cf565b60015b6115bb573d8060008114611593576040519150601f19603f3d011682016040523d82523d6000602084013e611598565b606091505b5060008151036115b3576115b263d1a57ed660e01b611083565b5b805181602001fd5b63150b7a0260e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614915050949350505050565b60606009805461161d90611ee4565b80601f016020809104026020016040519081016040528092919081815260200182805461164990611ee4565b80156116965780601f1061166b57610100808354040283529160200191611696565b820191906000526020600020905b81548152906001019060200180831161167957829003601f168201915b5050505050905090565b606060a060405101806040526020810391506000825281835b6001156116db57600184039350600a81066030018453600a81049050806116b9575b50828103602084039350808452505050919050565b60009392505050565b600033905090565b61170b8383611787565b60008373ffffffffffffffffffffffffffffffffffffffff163b146117825760006001549050600083820390505b61174c60008683806001019450866114df565b6117615761176063d1a57ed660e01b611083565b5b81811061173957816001541461177f5761177e600060e01b611083565b5b50505b505050565b60006001549050600082036117a7576117a663b562e8dd60e01b611083565b5b6117b46000848385611320565b6117d4836117c56000866000611326565b6117ce856118eb565b1761134e565b6005600083815260200190815260200160002081905550600160406001901b178202600660008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550600073ffffffffffffffffffffffffffffffffffffffff8473ffffffffffffffffffffffffffffffffffffffff161690506000810361188c5761188b632e07630060e01b611083565b5b6000838301905060008390505b808360007fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef600080a481816001019150810361189957816001819055505050506118e66000848385611379565b505050565b60006001821460e11b9050919050565b6000819050919050565b61190e816118fb565b82525050565b60006020820190506119296000830184611905565b92915050565b6000604051905090565b600080fd5b600080fd5b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b61197881611943565b811461198357600080fd5b50565b6000813590506119958161196f565b92915050565b6000602082840312156119b1576119b0611939565b5b60006119bf84828501611986565b91505092915050565b60008115159050919050565b6119dd816119c8565b82525050565b60006020820190506119f860008301846119d4565b92915050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611a38578082015181840152602081019050611a1d565b60008484015250505050565b6000601f19601f8301169050919050565b6000611a60826119fe565b611a6a8185611a09565b9350611a7a818560208601611a1a565b611a8381611a44565b840191505092915050565b60006020820190508181036000830152611aa88184611a55565b905092915050565b611ab9816118fb565b8114611ac457600080fd5b50565b600081359050611ad681611ab0565b92915050565b600060208284031215611af257611af1611939565b5b6000611b0084828501611ac7565b91505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611b3482611b09565b9050919050565b611b4481611b29565b82525050565b6000602082019050611b5f6000830184611b3b565b92915050565b611b6e81611b29565b8114611b7957600080fd5b50565b600081359050611b8b81611b65565b92915050565b60008060408385031215611ba857611ba7611939565b5b6000611bb685828601611b7c565b9250506020611bc785828601611ac7565b9150509250929050565b600080600060608486031215611bea57611be9611939565b5b6000611bf886828701611b7c565b9350506020611c0986828701611b7c565b9250506040611c1a86828701611ac7565b9150509250925092565b600060208284031215611c3a57611c39611939565b5b6000611c4884828501611b7c565b91505092915050565b611c5a816119c8565b8114611c6557600080fd5b50565b600081359050611c7781611c51565b92915050565b60008060408385031215611c9457611c93611939565b5b6000611ca285828601611b7c565b9250506020611cb385828601611c68565b9150509250929050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611cff82611a44565b810181811067ffffffffffffffff82111715611d1e57611d1d611cc7565b5b80604052505050565b6000611d3161192f565b9050611d3d8282611cf6565b919050565b600067ffffffffffffffff821115611d5d57611d5c611cc7565b5b611d6682611a44565b9050602081019050919050565b82818337600083830152505050565b6000611d95611d9084611d42565b611d27565b905082815260208101848484011115611db157611db0611cc2565b5b611dbc848285611d73565b509392505050565b600082601f830112611dd957611dd8611cbd565b5b8135611de9848260208601611d82565b91505092915050565b60008060008060808587031215611e0c57611e0b611939565b5b6000611e1a87828801611b7c565b9450506020611e2b87828801611b7c565b9350506040611e3c87828801611ac7565b925050606085013567ffffffffffffffff811115611e5d57611e5c61193e565b5b611e6987828801611dc4565b91505092959194509250565b60008060408385031215611e8c57611e8b611939565b5b6000611e9a85828601611b7c565b9250506020611eab85828601611b7c565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680611efc57607f821691505b602082108103611f0f57611f0e611eb5565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000611f4f826118fb565b9150611f5a836118fb565b9250828201905080821115611f7257611f71611f15565b5b92915050565b7f4d617820737570706c7920657863656564000000000000000000000000000000600082015250565b6000611fae601183611a09565b9150611fb982611f78565b602082019050919050565b60006020820190508181036000830152611fdd81611fa1565b9050919050565b6000611fef826118fb565b9150611ffa836118fb565b9250828202612008816118fb565b9150828204841483151761201f5761201e611f15565b5b5092915050565b7f6e6f742073656e7420656e6f7567682065687465720000000000000000000000600082015250565b600061205c601583611a09565b915061206782612026565b602082019050919050565b6000602082019050818103600083015261208b8161204f565b9050919050565b600081905092915050565b60006120a8826119fe565b6120b28185612092565b93506120c2818560208601611a1a565b80840191505092915050565b60006120da828561209d565b91506120e6828461209d565b91508190509392505050565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160008201527f6464726573730000000000000000000000000000000000000000000000000000602082015250565b600061214e602683611a09565b9150612159826120f2565b604082019050919050565b6000602082019050818103600083015261217d81612141565b9050919050565b600061218f826118fb565b9150600082036121a2576121a1611f15565b5b600182039050919050565b7f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572600082015250565b60006121e3602083611a09565b91506121ee826121ad565b602082019050919050565b60006020820190508181036000830152612212816121d6565b9050919050565b600081519050919050565b600082825260208201905092915050565b600061224082612219565b61224a8185612224565b935061225a818560208601611a1a565b61226381611a44565b840191505092915050565b60006080820190506122836000830187611b3b565b6122906020830186611b3b565b61229d6040830185611905565b81810360608301526122af8184612235565b905095945050505050565b6000815190506122c98161196f565b92915050565b6000602082840312156122e5576122e4611939565b5b60006122f3848285016122ba565b9150509291505056fea26469706673582212204b41a83235630f661702f6c1d8d5f09a2dccd7e7b21ff94128c66c871947565964736f6c63430008120033"
export const CheckEthereum = async () => {
  if (!window.ethereum) {
    return new Error("ethereum not found").message;
  }
  return true;
};

export const connectWallet = async () => {
  return window.ethereum
    .request({ method: "eth_requestAccounts" })
    .then((res) => {
      // console.log(res[0]);
      return res[0];
    });
};

export const SignUser = async () => {
  const provider = new ethers.BrowserProvider(window.ethereum);
  const signer = await provider.getSigner();
  const signature = await signer.signMessage("message");
  const signerAddress = await signer.getAddress();

  const messageHash = ethers.hashMessage("message");
  const recoverAddress = ethers.recoverAddress(messageHash, signature);

  const check = recoverAddress === signerAddress;

  if (check) {
    return recoverAddress;
  } else {
    return null;
  }

  //   console.log("check Signature :",check)
  //   console.log("recoverAddress :",recoverAddress)
  //   console.log("Actual Address :",signerAddress)
};

export const FetchBalance = async (wallet) => {
  const provider = new ethers.BrowserProvider(window.ethereum);
  const _balance = await provider.getBalance(wallet);
  // const test = parseInt(balance)
  // console.log(ethers.toNumber(balance))
  const balance = ethers.formatEther(_balance);
  return balance;
};

export const signMessage = async () => {
  const data = "hi";

  const provider = new ethers.BrowserProvider(window.ethereum);
  const signer = await provider.getSigner();

  const messageHash = ethers.hashMessage(data);
  const signedMessage = await signer.signMessage(messageHash);
  
  console.log("Hash: ", messageHash, "signedMessage: ", signedMessage);
  return {
    messageHash:messageHash,
    signedMessage:signedMessage,
  };
};

export const decode = async () => {
  const publicAddress = "0x85c3E62be3Fedc174b6DCc3F7c65e1b23eFA97EF";
  const hash =
    "0x50b2c43fd39106bafbba0da34fc430e1f91e3c96ea2acee2bc34119f92b37750";
  const signedMessage =
    "0x645cf8784f6d0ff9b714d75ae5eac3dacfc6f1ff2a7e42bf77f1e2823404c0a77a40916fa281df9daec77ce655c12fa1adefba67eddbe14066ea129034388c8e1b";

  const publicKey = ethers.recoverAddress(
    ethers.hashMessage(hash),
    signedMessage
  );

  const hello = console.log(publicKey);
  // const address = ethers.computeAddress(
  //   "0x0476698beebe8ee5c74d8cc50ab84ac301ee8f10af6f28d0ffd6adf4d6d3b9b762d46ca56d3dad2ce13213a6f42278dabbb53259f2d92681ea6a0b98197a719be3"
  // );

  console.log(hello);
};
// decode();

// publicAddress: 0x85c3E62be3Fedc174b6DCc3F7c65e1b23eFA97EF
// hash: 0x50b2c43fd39106bafbba0da34fc430e1f91e3c96ea2acee2bc34119f92b37750
// signedMessage:  0x645cf8784f6d0ff9b714d75ae5eac3dacfc6f1ff2a7e42bf77f1e2823404c0a77a40916fa281df9daec77ce655c12fa1adefba67eddbe14066ea129034388c8e1b

export const deployContract =async(title,price,size,url)=>{

  const provider = new ethers.BrowserProvider(window.ethereum);
  const signer = await provider.getSigner();

  const factory = new ethers.ContractFactory(abi,byteCode,signer)
  const contract  = await factory.deploy(title,"symbol",price,url,size).then(res=>{
    let add = res.getAddress()
    console.log(add)
    return add
  })
  return contract
}